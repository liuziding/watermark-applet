{"version":3,"sources":["webpack:////Users/fengye/上海简辰/github/小程序/watermark-applet/pageA/imageLine/imageLine.vue?c7fa","webpack:////Users/fengye/上海简辰/github/小程序/watermark-applet/pageA/imageLine/imageLine.vue?2c2a","uni-app:///main.js","webpack:////Users/fengye/上海简辰/github/小程序/watermark-applet/pageA/imageLine/imageLine.vue?ec31","webpack:////Users/fengye/上海简辰/github/小程序/watermark-applet/pageA/imageLine/imageLine.vue?b573","webpack:////Users/fengye/上海简辰/github/小程序/watermark-applet/pageA/imageLine/imageLine.vue?61b9","webpack:////Users/fengye/上海简辰/github/小程序/watermark-applet/pageA/imageLine/imageLine.vue?75ef","uni-app:///pageA/imageLine/imageLine.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","isSuccess","linkAddr","imageList","methods","stickup","uni","title","success","that","complete","resolution","titl","mask","url","timeout","content","showCancel","fail","icon","duration","position","firstResolution","secondResolution","saveAll","tempUrl","filePath","console","resolve","copyLink","updateImg","src","failurl","failurltext"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAylD,CAAgB,87CAAG,EAAC,C;;;;;;;;;;;ACA7mD;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;;;;ACNL;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,kBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkI;AAClI;AAC6D;AACL;AACsC;;;AAG9F;AACmN;AACnN,gBAAgB,iNAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,gGAAM;AACR,EAAE,yGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,oSAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjCA;AAAA;AAAA;AAAA;AAAs1B,CAAgB,uyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eC4B12B;EACAC;IACA;MACAC;MACAC;MAAA;MACAC;IACA;EACA;;EACAC;IACA;IACAC;MACA;MACAC;QAAAC;MAAA;MACAD;QACAE;UACA;UACA;UACA;UACA;UACA;YACAC;YACA;YACAA;UACA;QACA;QACAC;UACAJ;QACA;MACA;IACA;IAEA;IACAK;MACA;MACA;MACA;MACA;QACAL;UACAM;UACAC;QACA;QACAP;UACAQ;UACAC;UACAP;YACA;cACAF;cACA;gBACAG;gBACA;cACA;gBACAH;kBACAC;kBACAS;kBACAC;gBACA;cACA;gBACAR;cACA;YACA;cACAA;YACA;UACA;UACAS;YACAT;UACA;QACA;MACA;QACAH;UACAa;UACAZ;UACAa;UACAC;QACA;MACA;IACA;IAEA;IACAC;MACA;MACA;MACA;MACA;MACAhB;QACAQ;QACAC;QACAP;UACA;YACAF;YACA;cACAG;cACA;YACA;cACAH;gBACAC;gBACAS;gBACAC;cACA;YACA;UACA;YACAR;UACA;QACA;QACAS;UACAT;QACA;MACA;IACA;IAEA;IACAc;MACA;MACA;MACA;MACA;MACAjB;QACAQ;QACAN;UACA;YACAF;YACA;cACAG;cACA;YACA;cACAH;gBACAC;gBACAS;gBACAC;cACA;YACA;cACAX;gBACAC;gBACAS;gBACAC;cACA;YACA;UACA;YACAX;YACAA;cACAC;cACAS;cACAC;YACA;UACA;QACA;QACAC;UACAZ;UACAA;YACAC;YACAS;YACAC;UACA;QACA;MACA;IACA;IAEA;IACAO;MACA;MACAlB;QACAC;QACAM;MACA;MACA;QACA;QACA;UACAY;QACA;QACA;UACAnB;YACAQ;YACAC;YACAP;cACA;gBACAF;kBACAoB;kBACAlB;oBACAmB;kBACA;kBACAT;oBACAZ;oBACA;sBACAA;wBACAC;wBACAC;0BACA;4BACAF;8BACAE;8BACAU;gCACAS;8BACA;4BACA;0BACA;wBACA;sBACA;oBACA;kBACA;gBACA;gBACAC;cACA;YACA;YACAV;cACAZ;cACAA;gBACAC;gBACAS;gBACAC;gBACAT;kBACA;oBACAmB;kBACA;oBACAA;kBACA;gBACA;cACA;YACA;UACA;QACA;MACA;MAEA;QACA;MAAA,CACA;IACA;IAEA;IACAE;MACAvB;QACAN;QACAQ;UACAF;YACAC;YACAY;UACA;QACA;MACA;IACA;IAEA;IACAW;MACAxB;QACAC;QACAM;MACA;MACA;QACAkB;MACA;MACAzB;QACAQ;QACAC;QACAP;UACA;YACAF;cACAoB;cACAlB;gBACAF;kBACAC;gBACA;cACA;cACAW;gBACAZ;gBACA;kBACAA;oBACAC;oBACAC;sBACA;wBACAF;0BACAE;0BACAU;4BACAS;0BACA;wBACA;sBACA;oBACA;kBACA;gBACA;cACA;YACA;UACA;QACA;QACAT;UACAZ;UACAA;YACAC;YACAS;YACAC;YACAT;cACA;gBACAmB;cACA;gBACAA;cACA;YACA;UACA;UACA;UACA;UACA;YACAT;YACAc;YACAC;UACA;QACA;MACA;IACA;EACA;AACA;AAAA,2B","file":"pageA/imageLine/imageLine.js","sourcesContent":["import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./imageLine.vue?vue&type=style&index=0&id=7902bd34&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./imageLine.vue?vue&type=style&index=0&id=7902bd34&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1683348212248\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pageA/imageLine/imageLine.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./imageLine.vue?vue&type=template&id=7902bd34&scoped=true&\"\nvar renderjs\nimport script from \"./imageLine.vue?vue&type=script&lang=js&\"\nexport * from \"./imageLine.vue?vue&type=script&lang=js&\"\nimport style0 from \"./imageLine.vue?vue&type=style&index=0&id=7902bd34&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7902bd34\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pageA/imageLine/imageLine.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./imageLine.vue?vue&type=template&id=7902bd34&scoped=true&\"","var components\ntry {\n  components = {\n    uniEasyinput: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput\" */ \"@/uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./imageLine.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./imageLine.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"image-link\">\n\t\t<view class=\"search\">\n\t\t\t<uni-easyinput class=\"input\" trim=\"all\" v-model=\"linkAddr\" placeholder=\"请输入内容\"></uni-easyinput>\n\t\t\t<template v-if=\"linkAddr\">\n\t\t\t\t<view class=\"search_button\" @click=\"resolution\">解析</view>\n\t\t\t</template>\n\t\t\t<template v-else>\n\t\t\t\t<view class=\"search_button\" @click=\"stickup\">粘贴</view>\n\t\t\t</template>\n\t\t</view>\n\t\t\n\t\t<view class=\"image_wrap\">\n\t\t\t<template v-if=\"isSuccess\">\n\t\t\t\t<view class=\"save_all\" @click=\"saveAll\">批量保存到相册</view>\n\t\t\t\t<view class=\"image_list\" v-for=\"(item, index) in imageList\" :key=\"index\">\n\t\t\t\t\t<image class=\"image_li\" mode=\"aspectFit\" :src=\"item\"></image>\n\t\t\t\t\t<view class=\"image_action\">\n\t\t\t\t\t\t<view class=\"copy_link\" @click=\"copyLink($event, item)\">复制链接</view>\n\t\t\t\t\t\t<view class=\"update_img\" @click=\"updateImg($event, item)\">下载图片</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</template>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tisSuccess: false,\n\t\t\t\tlinkAddr: '', // 连接地址\n\t\t\t\timageList: [] // 解析出来的图片列表\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\t// 粘贴\n\t\t\tstickup() {\n\t\t\t\tlet that = this;\n\t\t\t\tuni.showLoading({ title: '加载中' });\n\t\t\t\tuni.getClipboardData({\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tlet reg = /(https?|http|ftp|file):\\/\\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/g\n\t\t\t\t\t\tlet resData = res.data\n\t\t\t\t\t\tlet str = resData.match(reg)\n\t\t\t\t\t\tlet ztlj = str[0]\n\t\t\t\t\t\tif (resData && resData !== that.linkAddr) {\n\t\t\t\t\t\t\tthat.linkAddr = resData\n\t\t\t\t\t\t\t// 调用解析方法\n\t\t\t\t\t\t\tthat.resolution()\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: () => {\n\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t\n\t\t\t// 解析\n\t\t\tresolution() {\n\t\t\t\tlet that = this\n\t\t\t\tlet inputValue = this.linkAddr\n\t\t\t\tlet url = encodeURIComponent(inputValue)\n\t\t\t\tif (url !== \"\") {\n\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\ttitl: \"解析中\",\n\t\t\t\t\t\tmask: true\n\t\t\t\t\t})\n\t\t\t\t\tuni.request({\n\t\t\t\t\t\turl: \"https://proxy.layzz.cn/lyz/getAnalyse?token=rzckszrckc-auther-523ddd&link=\" + url,\n\t\t\t\t\t\ttimeout: 15e3,\n\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\tif (res.data.message == \"操作成功\") {\n\t\t\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t\t\tif (res.data.data.pics !== null) {\n\t\t\t\t\t\t\t\t\tthat.imageList = res.data.data.pics\n\t\t\t\t\t\t\t\t\t!that.isSuccess && (that.isSuccess = true)\n\t\t\t\t\t\t\t\t} else if (res.data.data.playAddr !== null) {\n\t\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\t\ttitle: '提示',\n\t\t\t\t\t\t\t\t\t\tcontent: '检查到该链接为视频,请前往视频去水印页面解析',\n\t\t\t\t\t\t\t\t\t\tshowCancel: false\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthat.firstResolution()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthat.firstResolution()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail: () => {\n\t\t\t\t\t\t\tthat.firstResolution()\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ticon: \"none\",\n\t\t\t\t\t\ttitle: \"请输入链接\",\n\t\t\t\t\t\tduration: 2e3,\n\t\t\t\t\t\tposition: \"bottom\"\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 使用第二种备用解析方法\n\t\t\tfirstResolution() {\n\t\t\t\tlet that = this\n\t\t\t\tlet address = this.linkAddr\n\t\t\t\tlet reg = /(https?|http|ftp|file):\\/\\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/g\n\t\t\t\tlet url = address.match(reg)\n\t\t\t\tuni.request({\n\t\t\t\t\turl: \"https://api.srvv.cn/api/video/320EF2279DEED56F34C9721EE90C774F9A8FDECA6641A970C7/48/?url=\" + url,\n\t\t\t\t\ttimeout: 15e3,\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.data.status == '101') {\n\t\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t\tif (res.data.data.images && res.data.data.images !== null) {\n\t\t\t\t\t\t\t\tthat.imageList = res.data.data.images\n\t\t\t\t\t\t\t\t!that.isSuccess && (that.isSuccess = true)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\ttitle: '提示',\n\t\t\t\t\t\t\t\t\tcontent: '检查到该链接为视频,请前往视频去水印页面解析',\n\t\t\t\t\t\t\t\t\tshowCancel: false\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthat.secondResolution()\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: (e) => {\n\t\t\t\t\t\tthat.secondResolution()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t\n\t\t\t// 使用第三种备用解析方法\n\t\t\tsecondResolution() {\n\t\t\t\tlet that = this\n\t\t\t\tlet address = this.linkAddr\n\t\t\t\tlet reg = /(https?|http|ftp|file):\\/\\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/g\n\t\t\t\tlet url = address.match(reg)\n\t\t\t\tuni.request({\n\t\t\t\t\turl: \"https://api.spapi.cn/get?appkey=43158a31d6b8a1e00613d9220b200c6c&url=\" + url,\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.data.msg == '获取成功') {\n\t\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t\tif (res.data.data.atlas) {\n\t\t\t\t\t\t\t\tthat.imageList = res.data.data.atlas\n\t\t\t\t\t\t\t\t!that.isSuccess && (that.isSuccess = true)\n\t\t\t\t\t\t\t} else if (res.data.atlas == null) {\n\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\ttitle: '提示',\n\t\t\t\t\t\t\t\t\tcontent: '检查到该链接为视频,请前往视频去水印页面解析',\n\t\t\t\t\t\t\t\t\tshowCancel: false\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\ttitle: '解析失败：101',\n\t\t\t\t\t\t\t\t\tcontent: '网络异常，请稍后再试',\n\t\t\t\t\t\t\t\t\tshowCancel: false\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\ttitle: '解析失败：102',\n\t\t\t\t\t\t\t\tcontent: '网络异常，请稍后再试',\n\t\t\t\t\t\t\t\tshowCancel: false\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: (e) => {\n\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\ttitle: '解析失败：103',\n\t\t\t\t\t\t\tcontent: '网络异常，请稍后再试',\n\t\t\t\t\t\t\tshowCancel: false\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t\n\t\t\t// 批量保存所有照片\n\t\t\tsaveAll() {\n\t\t\t\tlet that = this;\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle: '图片批量保存中',\n\t\t\t\t\tmask: true\n\t\t\t\t})\n\t\t\t\tlet asyncFunc = function asyncFunc(i) {\n\t\t\t\t\tlet tempUrl = i;\n\t\t\t\t\tif (tempUrl.search(\"https\") == -1) {\n\t\t\t\t\t\ttempUrl = tempUrl.replace('http', 'https')\n\t\t\t\t\t}\n\t\t\t\t\treturn new Promise(function(resolve, reject) {\n\t\t\t\t\t\tuni.downloadFile({\n\t\t\t\t\t\t\turl: tempUrl,\n\t\t\t\t\t\t\ttimeout: 5e5,\n\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\tif (res.statusCode === 200) {\n\t\t\t\t\t\t\t\t\tuni.saveImageToPhotosAlbum({\n\t\t\t\t\t\t\t\t\t\tfilePath: res.tempFilePath,\n\t\t\t\t\t\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('下载成功')\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tfail: (e) => {\n\t\t\t\t\t\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t\t\t\t\t\tif (res.errMsg == \"saveImageToPhotosAlbum:fail auth deny\") {\n\t\t\t\t\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: '您需要授权相册权限',\n\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.openSetting({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess: () => {},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfail: (e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(e)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\tresolve()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail: (e) => {\n\t\t\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\ttitle: '下载出错',\n\t\t\t\t\t\t\t\t\tcontent: \"请点击复制链接去浏览器打开下载，并且请联系客服修复\" + res.errMsg,\n\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"用户点击确定\");\n\t\t\t\t\t\t\t\t\t\t} else if (res.cancel) {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"用户点击取消\");\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlet box5 = function() {\n\t\t\t\t\t// let _ref = (0, )\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 点击复制链接按钮\n\t\t\tcopyLink(e, src) {\n\t\t\t\tuni.setClipboardData({\n\t\t\t\t\tdata: src,\n\t\t\t\t\tsuccess() {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: \"复制成功\",\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t\n\t\t\t// 点击下载图片按钮\n\t\t\tupdateImg(e, src) {\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle: '保存图片中',\n\t\t\t\t\tmask: true\n\t\t\t\t})\n\t\t\t\tif (src.search(\"https\") == -1) {\n\t\t\t\t\tsrc = src.replace(\"http\", \"https\")\n\t\t\t\t}\n\t\t\t\tuni.downloadFile({\n\t\t\t\t\turl: src,\n\t\t\t\t\ttimeout: 5e5,\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.statusCode === 200) {\n\t\t\t\t\t\t\tuni.saveImageToPhotosAlbum({\n\t\t\t\t\t\t\t\tfilePath:res.tempFilePath,\n\t\t\t\t\t\t\t\tsuccess: (t) => {\n\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\ttitle: '保存相册成功'\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tfail: function fail(res) {\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t\tif (res.errMsg == \"saveImageToPhotosAlbum:fail auth deny\") {\n\t\t\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\t\t\ttitle: \"您需要授权相册权限\",\n\t\t\t\t\t\t\t\t\t\t\tsuccess: function success(res) {\n\t\t\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.openSetting({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess: function success(res) {},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfail: function fail(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: function fail(res) {\n\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\ttitle: \"下载出错\",\n\t\t\t\t\t\t\tcontent: \"请点击复制链接去浏览器打开下载，并且请联系客服修复\" + res.errMsg,\n\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\tsuccess: function success(res) {\n\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\tconsole.log(\"用户点击确定\");\n\t\t\t\t\t\t\t\t} else if (res.cancel) {\n\t\t\t\t\t\t\t\t\tconsole.log(\"用户点击取消\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvar db = uniCloud.database();\n\t\t\t\t\t\tvar collection = db.collection(\"fail\");\n\t\t\t\t\t\tvar res2 = collection.add({\n\t\t\t\t\t\t\tfail: res.errMsg,\n\t\t\t\t\t\t\tfailurl: a,\n\t\t\t\t\t\t\tfailurltext: this.$data.inputValue\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\" scoped>\n\tpage {\n\t\tbackground-color: #f0f1f1;\n\t}\n\t.image-link {\n\t\tpadding-bottom: 24rpx;\n\t}\n\t.search {\n\t\tmargin: 24rpx;\n\t\tdisplay: flex;\n\t\tgap: 16rpx;\n\t\t.input {\n\t\t\tflex: 1;\n\t\t}\n\t\t.uni-easyinput {\n\t\t\tbackground-color: #FFF;\n\t\t}\n\t\t.search_button {\n\t\t\twidth: 160rpx;\n\t\t\theight: 35px;\n\t\t\tcolor: #FFF;\n\t\t\tfont-size: 28rpx;\n\t\t\tborder-radius: 8rpx;\n\t\t\tbackground-color: #7A9BFD;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t}\n\t}\n\t\n\t.image_wrap {\n\t\theight: 100%;\n\t\tmargin: 24rpx;\n\t\twidth: auto;\n\t\t.save_all {\n\t\t\theight: 88rpx;\n\t\t\tline-height: 88rpx;\n\t\t\ttext-align: center;\n\t\t\tfont-size: 30rpx;\n\t\t\tbackground-color: #FFF;\n\t\t\tmargin-bottom: 12rpx;\n\t\t\tborder: 1px solid #ddd;\n\t\t\tcolor: rgba(0, 0, 0, 0.85);\n\t\t}\n\t\t.image_list {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\twidth: 100%;\n\t\t\tbackground-color: #FFF;\n\t\t\tmargin-bottom: 12rpx;\n\t\t\t.image_li {\n\t\t\t\tmargin: 24rpx auto;\n\t\t\t}\n\t\t\t.image_action {\n\t\t\t\tdisplay: flex;\n\t\t\t\tgap: 32rpx;\n\t\t\t\t.copy_link, .update_img {\n\t\t\t\t\tflex: 1;\n\t\t\t\t\theight: 72rpx;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tline-height: 72rpx;\n\t\t\t\t\tborder: 1px solid #DDD;\n\t\t\t\t\tborder-radius: 8rpx;\n\t\t\t\t\tfont-size: 30rpx;\n\t\t\t\t\tcolor: rgba(0, 0, 0, 0.85);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n</style>\n"],"sourceRoot":""}